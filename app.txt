from flask import Flask,request,render_template,session, make_response
from flask_bootstrap import Bootstrap
from datetime import datetime

app = Flask(__name__)

bootstrap = Bootstrap(app)
app.secret_key = 'mysecretkey'

@app.route('/', methods=['POST','GET'])
def hello():
    # if request.method == 'GET' :
    #     return "THIS IS A GET REQUEST"
    # elif request.method == 'POST':
    #     return "THIS IS A POST REQUEST"
    text = "This example of Filter"
    return render_template('index.html', text=text)

@app.template_filter('repeats')
def repeat(string, n) :
    return string * n;

@app.route('/set_session')
def set_session():
    session['name'] = "Pruthil"
    session['age'] = 18
    text = "This is an example of a Filter"
    return render_template('index.html', info=f"{session['name']}, {session['age']}", text=text)

@app.route('/clear')
def clear():
    text = "This is an example of a Filter"
    session.clear()
    return render_template('index.html', text=text)

@app.route('/set_cookie')
def set_cookie():
    text = "This is an example of a Filter"

    response = make_response(render_template('index.html', message='Cookie set', text=text))
    response.set_cookie('First_Cookie', 'Pookie')
    return response

@app.route('/get_cookie')
def get_cookie():
    text = "This is an example of a Filter"
    cookie_value = request.cookies.get('First_Cookie')
    response = make_response(render_template('index.html', text=text, value=cookie_value))
    response.set_cookie('First_Cookie', 'Pookie')
    return response


@app.route('/handle_url') 
def handle_urls() :
    if 'greeting' in request.args and 'name' in request.args :
        greeting = request.args.get('greeting')
        name = request.args.get('name')
        return f"{greeting} {name}"
    else : 
        return "<h1>YOU HAVE MISSING PARAMETERS</h1>"
    
@app.route('/todo')
def todo():

    return render_template('Todo.html')

if __name__ == '__main__':
 app.run(debug=True)
